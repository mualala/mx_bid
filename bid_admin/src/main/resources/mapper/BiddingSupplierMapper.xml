<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.meixin.bid_admin.mappers.dao.BiddingSupplierDao" >

    <resultMap id="suppliersByNameMap" type="com.meixin.bid_admin.entity.BiddingSupplier">
        <id column="bidding_supplier_id" property="biddingSupplierId" jdbcType="INTEGER" />
        <id column="bid_name" property="bidName" jdbcType="VARCHAR" />
        <id column="suid" property="suid" jdbcType="INTEGER" />

        <association property="supplier" javaType="com.meixin.bid_admin.entity.Supplier">
            <result column="supplier_id" property="supplierId" jdbcType="INTEGER" />
            <result column="name" property="name" jdbcType="VARCHAR" />
            <result column="username" property="username" jdbcType="VARCHAR" />
            <result column="phone" property="phone" jdbcType="VARCHAR" />
            <result column="company_name" property="companyName" jdbcType="VARCHAR" />
            <result column="legal" property="legal" jdbcType="VARCHAR" />
            <result column="company_address" property="companyAddress" jdbcType="VARCHAR" />
            <result column="company_desc" property="companyDesc" jdbcType="VARCHAR" />
        </association>
    </resultMap>

    <select id="querySuppliersByBiddingName" resultMap="suppliersByNameMap">
        SELECT
        bs.bid_name, bs.suid, s.supplier_id, s.name, s.username, s.phone, s.company_name, s.legal, s.company_address, s.company_desc
        FROM bidding_supplier bs
        INNER JOIN supplier s ON s.supplier_id=bs.suid
        WHERE bs.bid_name=#{bidName}
    </select>

    <delete id="deleteSus">
        DELETE FROM bidding_supplier
        <where>
            bid_name in
            <foreach collection="names" item="name" index="index" open="(" close=")" separator=",">
                #{name}
            </foreach>
        </where>
    </delete>


</mapper>